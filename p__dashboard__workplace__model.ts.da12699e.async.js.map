{"version":3,"sources":["src/pages/dashboard/workplace/service.ts","src/pages/dashboard/workplace/model.ts"],"names":["_request","_interopRequireDefault","__webpack_require__","queryProjectNotice","_callee","_regenerator","default","wrap","_context","prev","next","abrupt","stop","queryActivities","_callee2","_context2","fakeChartData","_callee3","_context3","queryCurrent","_callee4","_context4","_service","Model","namespace","state","currentUser","projectNotice","activities","radarData","effects","init","mark","_","_ref","put","type","fetchUserCurrent","_ref2","call","response","sent","payload","fetchProjectNotice","_ref3","Array","isArray","fetchActivitiesList","_ref4","fetchChart","_ref5","_ref6","_context5","reducers","save","_ref7","_objectSpread2","clear"],"mappings":"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","file":"p__dashboard__workplace__model.ts.da12699e.async.js","sourcesContent":["import request from '@/utils/request';\n\nexport async function queryProjectNotice() {\n  return request('/api/project/notice');\n}\n\nexport async function queryActivities() {\n  return request('/api/activities');\n}\n\nexport async function fakeChartData() {\n  return request('/api/fake_chart_data');\n}\n\nexport async function queryCurrent() {\n  return request('/api/currentUser');\n}\n","import { AnyAction, Reducer } from 'redux';\nimport { EffectsCommandMap } from 'dva';\nimport { ActivitiesType, CurrentUser, NoticeType, RadarDataType } from './data.d';\nimport { fakeChartData, queryActivities, queryCurrent, queryProjectNotice } from './service';\n\nexport interface ModalState {\n  currentUser: Partial<CurrentUser>;\n  projectNotice: NoticeType[];\n  activities: ActivitiesType[];\n  radarData: RadarDataType[];\n}\n\nexport type Effect = (\n  action: AnyAction,\n  effects: EffectsCommandMap & { select: <T>(func: (state: ModalState) => T) => T },\n) => void;\n\nexport interface ModelType {\n  namespace: string;\n  state: ModalState;\n  reducers: {\n    save: Reducer<ModalState>;\n    clear: Reducer<ModalState>;\n  };\n  effects: {\n    init: Effect;\n    fetchUserCurrent: Effect;\n    fetchProjectNotice: Effect;\n    fetchActivitiesList: Effect;\n    fetchChart: Effect;\n  };\n}\n\nconst Model: ModelType = {\n  namespace: 'dashboardWorkplace',\n  state: {\n    currentUser: {},\n    projectNotice: [],\n    activities: [],\n    radarData: [],\n  },\n  effects: {\n    *init(_, { put }) {\n      yield put({ type: 'fetchUserCurrent' });\n      yield put({ type: 'fetchProjectNotice' });\n      yield put({ type: 'fetchActivitiesList' });\n      yield put({ type: 'fetchChart' });\n    },\n    *fetchUserCurrent(_, { call, put }) {\n      const response = yield call(queryCurrent);\n      yield put({\n        type: 'save',\n        payload: {\n          currentUser: response,\n        },\n      });\n    },\n    *fetchProjectNotice(_, { call, put }) {\n      const response = yield call(queryProjectNotice);\n      yield put({\n        type: 'save',\n        payload: {\n          projectNotice: Array.isArray(response) ? response : [],\n        },\n      });\n    },\n    *fetchActivitiesList(_, { call, put }) {\n      const response = yield call(queryActivities);\n      yield put({\n        type: 'save',\n        payload: {\n          activities: Array.isArray(response) ? response : [],\n        },\n      });\n    },\n    *fetchChart(_, { call, put }) {\n      const { radarData } = yield call(fakeChartData);\n      yield put({\n        type: 'save',\n        payload: {\n          radarData,\n        },\n      });\n    },\n  },\n  reducers: {\n    save(state, { payload }) {\n      return {\n        ...state,\n        ...payload,\n      };\n    },\n    clear() {\n      return {\n        currentUser: {},\n        projectNotice: [],\n        activities: [],\n        radarData: [],\n      };\n    },\n  },\n};\n\nexport default Model;\n"],"sourceRoot":""}