{"version":3,"sources":["src/pages/list/table-list/model.ts","src/pages/list/table-list/service.ts"],"names":["_service","__webpack_require__","Model","namespace","state","data","list","pagination","effects","fetch","_regenerator","default","mark","_ref","_ref2","payload","call","put","response","wrap","_context","prev","next","queryRule","sent","type","stop","add","_ref3","_ref4","callback","_context2","addRule","remove","_ref5","_ref6","_context3","removeRule","update","_ref7","_ref8","_context4","updateRule","reducers","save","action","_objectSpread2","_request","_interopRequireDefault","_callee","params","abrupt","_callee2","method","_callee3","_callee4"],"mappings":"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","file":"p__list__table-list__model.ts.7cb6ab95.async.js","sourcesContent":["import { AnyAction, Reducer } from 'redux';\nimport { EffectsCommandMap } from 'dva';\nimport { addRule, queryRule, removeRule, updateRule } from './service';\n\nimport { TableListData } from './data.d';\n\nexport interface StateType {\n  data: TableListData;\n}\n\nexport type Effect = (\n  action: AnyAction,\n  effects: EffectsCommandMap & { select: <T>(func: (state: StateType) => T) => T },\n) => void;\n\nexport interface ModelType {\n  namespace: string;\n  state: StateType;\n  effects: {\n    fetch: Effect;\n    add: Effect;\n    remove: Effect;\n    update: Effect;\n  };\n  reducers: {\n    save: Reducer<StateType>;\n  };\n}\n\nconst Model: ModelType = {\n  namespace: 'listTableList',\n\n  state: {\n    data: {\n      list: [],\n      pagination: {},\n    },\n  },\n\n  effects: {\n    *fetch({ payload }, { call, put }) {\n      const response = yield call(queryRule, payload);\n      yield put({\n        type: 'save',\n        payload: response,\n      });\n    },\n    *add({ payload, callback }, { call, put }) {\n      const response = yield call(addRule, payload);\n      yield put({\n        type: 'save',\n        payload: response,\n      });\n      if (callback) callback();\n    },\n    *remove({ payload, callback }, { call, put }) {\n      const response = yield call(removeRule, payload);\n      yield put({\n        type: 'save',\n        payload: response,\n      });\n      if (callback) callback();\n    },\n    *update({ payload, callback }, { call, put }) {\n      const response = yield call(updateRule, payload);\n      yield put({\n        type: 'save',\n        payload: response,\n      });\n      if (callback) callback();\n    },\n  },\n\n  reducers: {\n    save(state, action) {\n      return {\n        ...state,\n        data: action.payload,\n      };\n    },\n  },\n};\n\nexport default Model;\n","import request from '@/utils/request';\nimport { TableListParams } from './data.d';\n\nexport async function queryRule(params: TableListParams) {\n  return request('/api/rule', {\n    params,\n  });\n}\n\nexport async function removeRule(params: TableListParams) {\n  return request('/api/rule', {\n    method: 'POST',\n    data: {\n      ...params,\n      method: 'delete',\n    },\n  });\n}\n\nexport async function addRule(params: TableListParams) {\n  return request('/api/rule', {\n    method: 'POST',\n    data: {\n      ...params,\n      method: 'post',\n    },\n  });\n}\n\nexport async function updateRule(params: TableListParams) {\n  return request('/api/rule', {\n    method: 'POST',\n    data: {\n      ...params,\n      method: 'update',\n    },\n  });\n}\n"],"sourceRoot":""}